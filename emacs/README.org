# -*- mode: org; -*-
#+TITLE: README
#+KEYWORDS: emacs, cheatsheet, default
#+STARTUP: content



С этого файла начинается моя небольшая справочная система.



* ПОЛЕЗНЫЕ ССЫЛКИ

  [[https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet]["Markdown Cheatsheet" adam-p/markdown-here]]

  [[https://caiorss.github.io/org-wiki/][org-wiki html documentation]]

  [[https://github.com/caiorss/org-wiki][org-wiki repository]]


* [[file:help/literate-config.org][literate-config]]

* [[file:help/Keybindings.org][Emacs Key bindings]] - Emacs keybindings and useful commands.
* РАЗНЫЕ ЗАПИСИ - НЕПОНЯЯТНО КУДА ИХ ЗАНЕСТИ

  *bold*, /italic/, _underlined_, =verbatim= and ~code~, and, if you must, +strike-through+


  Вводим любой префикс, а затем =,=
  Prefix , - =describe-prefix-bindings=


* DISABLED-COMMAND-FUNCTION - ОТКЛЮЧЕНИЕ КОМАНД →

  #+begin_SRC emacs-lisp :tangle yes

    (put 'org-mark-element 'disabled t)

    (with-eval-after-load 'org-mode
      (put 'org-mark-element 'disabled t))

  #+END_SRC

* MODES →

** quelpa

   #+BEGIN_SRC emacs-lisp :tangle yes

     :init
     (unless (package-installed-p 'undo-tree)
       (quelpa '(undo-tree :fetcher url :url "http://git.savannah.gnu.org/cgit/emacs/elpa.git/plain/packages/undo-tree/undo-tree.el")))

     (unless (package-installed-p 'queue)
       (quelpa '(queue :fetcher url :url "http://git.savannah.gnu.org/cgit/emacs/elpa.git/plain/packages/queue/queue.el" :version original)))

     :quelpa (smart-mode-line :fetcher github :repo "Bruce-Connor/smart-mode-line")

   #+END_SRC

** org-mode

*** ссылка в режиме org на заголовок в другом файле org:

    выбираем элемент, на который нужно сделать ссылку - =org-store-link=, затем
    выбираем место, где будет расположена ссылка - =org-insert-link=, нас
    попросят подтвердить местоположение и затем ввести имя ссылки - можно просто
    нажать Enter, чтобы принять значения по умолчанию. Будет создана ссылка типа
    =[[file: foo.org :: * bar] [link-name]]=, которая отображается как link-name.

    Более подробно о ссылках читаем [[https://orgmode.org/manual/Handling-Links.html][Handling Links]].
    И ещё читаем [[https://orgmode.org/manual/External-Links.html#External-links][External Links]].


* РЕДАКТИРОВАНИЕ ТЕКСТА →

  |               |                                                             | was earlier   |
  |---------------+-------------------------------------------------------------+---------------|
  | backspace     | delete-char                                                 |               |
  | delete        | delete-backward-char                                        |               |
  | M-d           | kill-word (forward)                                         |               |
  | C-DEL (***)     | kill-word (forward)                                         |               |
  | C-backspace   | backward-kill-word                                          |               |
  | C-x backspace | backward-kill-sentence                                      |               |
  |               | kill-paragraph                                              |               |
  |               | backward-kill-paragraph                                     |               |
  | C-k           | kill-line (from point to end of line)                       |               |
  | M-k (*)       | ~my/delete-line~ (delete the whole line)                      | ~kill-sentence~ |
  | C-S-backspace | kill-whole-line                                             |               |
  | C-w (**)      | kill-region (cut) - without region cuts the entire line     |               |
  | M-w (**)      | kill-ring-save (copy) - without region cuts the entire line |               |
  | C-y           | yank (paste)                                                |               |
  | M-y (*)       | helm-show-kill-ring                                         | ~yank-pop~      |
  | C-x i         | insert-file                                                 |               |
  | C-M-\ (*)     | ~my/indent-region-or-buffer~                                  | ~indent-region~ |
  | C-x /         | ~my/comment-or-uncomment-this~                                |               |
  | C-q           | quoted-insert                                               |               |
  | C-x r k       | kill-rectangle                                              |               |
  | C-x r M-w     | copy-rectangle-as-kill                                      |               |
  |               |                                                             |               |

** вставка символа
   ~insert-char~
   C-x 8 ...
   C-x 8 C-H - help


* ПЕРЕМЕЩЕНИЕ ПО ТЕКСТУ →
** [[http://ergoemacs.org/emacs/emacs_jump_to_previous_position.html][ergoemacs - Jump to Previous Position]]
*** mark-ring, global-mark-ring, pop-global-mark
    Emacs сохраняет позиции курсора и позволяет быстро к ним переходить.
    Есть 2 кольца с отметками:
    - ~mark-ring~         - У каждого буфера есть своя копия.
    - ~global-mark-ring~  - Глобальный буфер.

    По умолчанию каждое кольцо меток сохраняет 16 позиций.
    При установке новой (семнадцатой) метки самая старая удаляется.
    Вы можете заставить его хранить меньше позиций для лучшего использования прыжка.
    |-------------------------------|
    | (setq mark-ring-max 6)        |
    | (setq global-mark-ring-max 6) |
    |-------------------------------|

*** Jump to Previous Position
    Часто вам нужно перейти на предыдущую позицию в буфере.
    В Emacs есть кольцо меток буфера (~mark ring~) и глобальное кольцо меток (~global mark ring~), которые записывают позиции меток и позволяют вам переходить к ним.
    Чтобы отметить позицию, введите команду ~set-mark~ (~Ctrl-SPC ~Ctrl-SPC~) - сделайте это дважды, чтобы убрать выделение. Это помещает текущую позицию в кольцо меток.
    Есть 3 способа переместить курсор в предыдущую позицию.
    |                         |                                                                                  |
    |-------------------------+----------------------------------------------------------------------------------|
    | ~Ctrl-u Ctrl-SPC~         | Переместить курсор в предыдущую отмеченную позицию в текущем буфере.             |
    |                         | Повторный вызов переместит курсор на позиции в кольце отметок.                   |
    |-------------------------+----------------------------------------------------------------------------------|
    | ~pop-global-mark~         | Переместить курсор в предыдущую отмеченную позицию (может быть в другом буфере). |
    | (~Ctrl-x Ctrl-SPC~)       | Повторный вызов переместит курсор на позиции в ~global-mark-ring~.                 |
    |-------------------------+----------------------------------------------------------------------------------|
    | ~exchange-point-and-mark~ | Переместить курсор на другой конец выделения.                                    |
    | (~Ctrl-x Ctrl-x~)         | Повторный вызов любого из вышеперечисленных вернет курсор в начальную позицию.   |
    |                         |                                                                                  |

** Navigation - Навигация по тексту


     |                               |                                  |                                                    |
     |-------------------------------+----------------------------------+----------------------------------------------------|
     | C-a                           | my/smart-beginning-of-line ~(*)~   | was =move-beginning-of-line= Go to start of the line |
     | C-e                           | move-end-of-line                 | Go to end of the line.                             |
     | C-p [up key]                  | previous-line                    |                                                    |
     | C-n [down key]                | next-line                        |                                                    |
     | M-b                           | backward-word                    | Move backward one word                             |
     | M-f                           | forward-word                     | Move forward one word                              |
     | M-[left key] (C-[left key])   | left-word                        | Move backward one word                             |
     | M-[right key] (C-[right key]) | right-word                       | Move forward one word                              |
     | M-g g <line-num>              | goto-line                        | Go to line number                                  |
     | M-g c <cursor-pos>            | goto-char                        | Go to character position                           |
     | M-g M-g                       | my/goto-line-with-feedback ~(*)~   |                                                    |
     |                               | previous-logical-line            |                                                    |
     |                               | next-logical-line                |                                                    |
     |-------------------------------+----------------------------------+----------------------------------------------------|
     | *scroll*                        |                                  |                                                    |
     |-------------------------------+----------------------------------+----------------------------------------------------|
     | C-v (next)                    | scroll-up-command                |                                                    |
     | M-v (prior)                   | scroll-down-command              |                                                    |
     | C-x < (C-next)                | scroll-left                      |                                                    |
     | C-x > (C-prior)               | scroll-right                     |                                                    |
     | C-M-S-v (M-prior, ESC prior)  | scroll-other-window-down         |                                                    |
     | C-M-v (M-next, ESC next)      | scroll-other-window              |                                                    |
     | ESC <end>                     | end-of-buffer-other-window       |                                                    |
     | ESC <begin>                   | beginning-of-buffer-other-window |                                                    |
     | M-<                           | beginning-of-buffer              | Move to top of buffer                              |
     | M->                           | end-of-buffer                    | Move to Bottom of buffer                           |
     |                               |                                  |                                                    |
     |                               |                                  |                                                    |

* SEARCH, REPLACE →

** ~swiper~ - поиск символа или слова в точке:
   ~M-n~ - ~ivy-next-history-element~ - получить символ в точке.
   ~M-j~ - ~ivy-yank-word~ - расширить ввод минибуфера следующим словом
   (аналогично ~C-s~ ~C-w~ в ~isearch~).

** ~swiper~ - скопировать линию и вернуться в исходную точку:
   ~M-o~ ~w~




** grep

   перечислит весь совпадающий текст всех файлов в текущем каталоге.
   Если в настройках не указано - рекурсивно не ищет.
   Для этого в командной строке добавляем -r и имеем следующий вид
   grep -ir -nH -e "bind" *el.
   Хотя для рекурсивного поиска лучше использовать ~ag~ и ~rg~.

** rgrep

   искать совпадающий текст во всех файлах в текущем каталоге и подкаталогах

** lgrep

   искать только некоторые файлы текущего каталога, используя текстовый шаблон
   (регулярное выражение) в именах файлов в первую очередь.


** grep-find

   комбинация команд ~grep~ и ~find~
   Example prompt:
   ~find . -type f -print0 | xargs -0 -e grep -nH -e MySearchStr~


** find-dired

   самая общая команда в этой серии, которая позволяет вам указать любое условие,
   которое можно проверить с помощью ~find~. Она принимает два аргумента минибуфера,
   каталог и аргументы поиска; она запускает поиск в каталоге, передавая ~find-args~,
   чтобы сказать, какое условие проверить. Чтобы использовать эту команду, вам
   нужно знать, как использовать ~find~.

** find-name-dired

   читает аргументы ~directory~ и ~pattern~, и выбирает все файлы в каталоге или его
   подкаталогах, чьи индивидуальные имена соответствуют шаблону.
   Выбранные таким образом файлы отображаются в буфере ~Dired~, в котором доступны
   обычные команды ~Dired~.

* DIRED →

** Запуск dired

   |           |                         |
   |-----------|-------------------------|
   |           | dired                   |
   | C-x d     | ido-dired               |
   | C-x 4 d   | ido-dired-other-window  |
   | C-d t d   | my/sudired              |
   | C-x C-j   | dired-jump              |
   | C-x 4 C-j | dired-jump-other-window |
   |           | ido-dired-other-frame   |
   |           |                         |

** Команды в буфере dired

   |             |                                           |         |        |
   |-------------|-------------------------------------------|---------|--------|
   | m           | dired-mark                                |         |        |
   | %m          | dired-mark-files-regexp (mark by pattern) |         |        |
   | %g          | dired-mark-files-containing-regexp        |         |        |
   | d           | dired-flag-file-deletion                  |         |        |
   | % d         | dired-flag-files-regexp (for delete)      |         |        |
   | % u         | dired-upcase (rename upcase)              |         |        |
   | % l         | dired-downcase (rename downcase)          |         |        |
   | % R         | dired-do-rename-regexp                    |         |        |
   | % r         | dired-do-rename-regexp                    |         |        |
   | % C         | dired-do-copy-regexp                      |         |        |
   | % H         | dired-do-hardlink-regexp                  |         |        |
   | % S         | dired-do-symlink-regexp                   |         |        |
   | =           | diredp-ediff                              |         |        |
   | u           | dired-unmark                              |         |        |
   | U           | dired-unmark-all-marks                    |         |        |
   | x           | dired-do-flagged-delete (delete marked)   |         |        |
   | C           | dired-do-copy                             |         |        |
   | R           | dired-do-rename                           |         |        |
   | r           | diredp-rename-this-file                   |         |        |
   | D           | dired-do-delete                           |         |        |
   | Z           | dired-do-compress                         |         |        |
   | c           | dired-do-compress-to                      |         |        |
   | +           | dired-create-directory                    |         |        |
   | g           | revert-buffer (refresh dir listing)       |         |        |
   | M-q         | dired-do-query-replace-regexp             |         |        |
   | i           | dired-maybe-insert-subdir                 |         |        |
   | K           | dired-kill-subdir                         |         |        |
   | ^           | my/dired-go-up-dir                        |         |        |
   | q           | quit-window                               |         |        |
   |             |                                           |         |        |
   |             |                                           |         |        |
   | e (C-x C-q) | wdired-change-to-wdired-mode              | C-c C-c | commit |
   |             |                                           | C-c C-k | abort  |
   |             |                                           |         |        |
   | / /         | dired-narrow                              |         |        |
   | / f         | dired-narrow-fuzzy                        |         |        |
   | / r         | dired-narrow-regexp                       |         |        |
   |             |                                           |         |        |
   | s           | xah-dired-sort                            |         |        |
   | M-o         | xah-open-in-external-app                  |         |        |
   | M-e         | my/open-window-manager                    |         |        |
   |             |                                           |         |        |
   | k           | dired-do-kill-lines                       |         |        |
   | M-k         | dired-kill-line                           |         |        |
   | C-d M-o     | my/dired-start-process                    |         |        |
   |             |                                           |         |        |
   | C-d <right> | dired-subtree-toggle                      |         |        |
   | <f5>        | dired-subtree-revert                      |         |        |
   |             |                                           |         |        |
   | C-d R       | dired-rsync                               |         |        |
   |             |                                           |         |        |
   | P           | peep-dired                                |         |        |
   |             |                                           |         |        |
   |             |                                           |         |        |
   |             |                                           |         |        |

* GIT →

  ~cd ~./emacs.d~

  ~git status~

  ~git add ...~

  ~git commit -m "..."~

  ~git push~

** github

   ~cd ~./emacs.d~

   ~git init~

   Создаём .gitignore

   ~git add .~

   ~git remote add origin git@github.com:abunbux/dotemacs.git~

   ~git push -u origin master~

*** Switching remote URLs from HTTPS to SSH

    1. ~cd ~./emacs.d~

    ~$ git remote -v~
    > origin  https://github.com/USERNAME/REPOSITORY.git (fetch)

    > origin  https://github.com/USERNAME/REPOSITORY.git (push)

    2. Change your remote's URL from HTTPS to SSH with the git remote set-url command.

    ~$ git remote set-url origin git@github.com:USERNAME/REPOSITORY.git~

    3. Verify that the remote URL has changed.

    ~$ git remote -v~

    > origin  git@github.com:abunbux/dotemacs.git (fetch)

    > origin  git@github.com:abunbux/dotemacs.git (push)

* BOOKMARKS →

  |                      |                                                                    |
  |----------------------|--------------------------------------------------------------------|
  | C-x r m RET          | Set the bookmark for the visited file, at point.                   |
  | C-x r m bookmark RET | Set the bookmark named bookmark at point (~bookmark-set~).           |
  | C-x r M bookmark RET | Like ~C-x r m~, but don't overwrite an existing bookmark.            |
  | C-x r b bookmark RET | Jump to the bookmark named bookmark (~bookmark-jump~).               |
  | C-x r l              | List all bookmarks (~list-bookmarks~).                               |
  | ~bookmark-save~        | Save all the current bookmark values in the default bookmark file. |
  |                      |                                                                    |

  ~counsel-bookmark~
  ~helm-bookmarks~
  ~bookmark-bmenu-list~
* REGISTERS →

  |                               |                                                                                             |
  |-------------------------------+---------------------------------------------------------------------------------------------|
  | C-x r SPC (r)                 | Record the position of point and the current buffer in register r (~point-to-register~).      |
  | C-x r j (r)                   | Jump to the position and buffer saved in register r (~jump-to-register~).                     |
  | C-x r s (r)                   | Copy region into register r (~copy-to-register~).                                             |
  | C-x r i (r)                   | Insert text from register r (~insert-register~).                                              |
  | ~append-to-register~ RET (r)    | Append region to text in register r.                                                        |
  |                               | When register r contains text, you can use ~C-x r +~ (~increment-register~)                     |
  |                               | to append to that register.                                                                 |
  |                               | Note that command ~C-x r +~ behaves differently if r contains a number.                       |
  | ~prepend-to-register~ RET (r)   | Prepend region to text in register r.                                                       |
  | C-x r r (r)                   | Copy the region-rectangle into register r (~copy-rectangle-to-register~).                     |
  |                               | With prefix argument, delete it as well.                                                    |
  | C-x r i (r)                   | Insert the rectangle stored in register r (if it contains a rectangle) (~insert-register~).   |
  | C-u number C-x r n (r)        | Store number into register r (~number-to-register~).                                          |
  | C-u number C-x r + (r)        | If r contains a number, increment the number in that register by number.                    |
  |                               | Note that command ~C-x r +~ (~increment-register~) behaves differently if r contains text.      |
  | C-x r i (r)                   | Insert the number from register r into the buffer.                                          |
  | C-x r f (r)                   | Copy the frame configuration into register r.                                               |
  |                               |                                                                                             |

  ~helm-register~
  ~counsel-register~
  ~kmacro-to-register~ (~C-x C-k x~)


  (~C-x r j~)
  (set-register ?i '(file . "~/.emacs.d/init.el"))
  (set-register ?g '(file . "~/.gitconfig"))
  (set-register ?p '(file . "/etc/portage/"))

* ABBREV (ABBREVIATIONS) →

  |       |                    |
  |-------+--------------------+
  | M-/   | dabbrev-expand     |
  | C-M-/ | dabbrev-completion |
  |       |                    |
